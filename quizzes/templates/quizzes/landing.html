{% extends "quizzes/base.html" %}
{% block title %}IQ Test Platform{% endblock %}

{% block extra_css %}
<style>

    /* Smooth Fade-up Animation */
    .fade-up {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity .8s ease-out, transform .8s cubic-bezier(0.22, 1, 0.36, 1);
    }
    .fade-up.show {
        opacity: 1;
        transform: translateY(0);
    }

    /* =============================
       NAVBAR FIX ‚Äî High Contrast 
       ============================= */
    #mainNav {
        background: rgba(15, 23, 42, 0.35); /* dark-blue glass */
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        transition: all 0.35s ease;
        z-index: 999;
    }
    #mainNav.scrolled {
        background: rgba(15, 23, 42, 0.55);
        box-shadow: 0 4px 25px rgba(0,0,0,0.2);
    }

    .nav-link-ani {
        position: relative;
        font-weight: 500;
        color: white !important;
    }
    .nav-link-ani::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -4px;
        width: 0%;
        height: 2px;
        background-color: #fff;
        transition: width 0.35s ease;
    }
    .nav-link-ani:hover::after {
        width: 100%;
    }


    /* =============================
         HERO SECTION (Dark Gradient)
       ============================= */
    .hero {
        padding: 90px 20px 70px;
        text-align: center;
        color: white;
        position: relative;
        background: linear-gradient(160deg, #1e1b4b 0%, #312e81 40%, #4338ca 100%);
        border-bottom-left-radius: 40px;
        border-bottom-right-radius: 40px;
        overflow: hidden;
    }

    .hero .badge {
        background: rgba(255,255,255,0.15);
        color: #fff;
        border-radius: 999px;
        padding: 6px 12px;
        font-weight:600;
        display:inline-block;
        margin-bottom: 18px;
    }

    .hero h1 {
        font-size: 3rem;
        font-weight: 700;
        color: white;
        text-shadow: 0 6px 30px rgba(0,0,0,0.45);
    }

    .hero p.lead {
        color: rgba(255,255,255,0.9);
        font-size: 1.15rem;
        max-width: 700px;
        margin: 0 auto;
    }


    /* =============================
         FEATURES SECTION 
       ============================= */
    .feature-card {
        background: white;
        border-radius: 16px;
        padding: 22px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        color: #0f172a;
        transition: transform .3s ease, box-shadow .3s ease;
    }
    .feature-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 35px rgba(0,0,0,0.18);
    }

    .feature-icon {
        width:56px;
        height:56px;
        border-radius:12px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:22px;
        margin-bottom:10px;
        color: white;
    }


    /* =============================
         SAMPLE QUESTIONS SECTION
       ============================= */
    .sample-card {
        background: white;
        border-radius: 12px;
        padding: 12px;
        box-shadow: 0 10px 30px rgba(2,6,23,0.08);
    }

    .sample-img {
        height: 220px;
        object-fit: contain;
        border-radius: 8px;
        background: #f8fafc;
    }


    /* =============================
         HOW IT WORKS
       ============================= */
    .step {
        background: rgba(255,255,255,0.95);
        border-radius: 12px;
        padding: 18px;
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        transition: transform .3s ease;
    }
    .step:hover {
        transform: translateY(-5px);
    }


    /* =============================
         BODY BACKGROUND
       ============================= */
    body {
        background: #eef2ff; /* soft light lavender */
    }

    @media (min-width: 768px) {
        .hero h1 { font-size: 3.2rem; }
        .sample-img { height: 260px; }
    }

</style>
{% endblock %}


{% block content %}

<!-- HERO SECTION -->
<div class="hero">
    <div class="container">

      <span class="badge">üß† Brain Training & IQ Tests</span>

      <h1>Measure & Improve Your Mind ‚Äî fun, fast, reliable</h1>

      <p class="lead mt-3">
        Take adaptive IQ tests, track your progress with visual reports, 
        and train with upcoming brain games like Sudoku, Crossword & Memory Boost.
      </p>

      <div class="cta mt-4">
        {% if request.user.is_authenticated %}
            <a href="{% url 'test_list' %}" class="btn btn-lg btn-primary">Start Test</a>
            <a href="{% url 'user_dashboard' %}" class="btn btn-lg btn-outline-light">Dashboard</a>
        {% else %}
            <a href="{% url 'test_list' %}" class="btn btn-lg btn-primary">Try a Demo Test</a>
            <a href="{% url 'register' %}" class="btn btn-lg btn-light">Create Account</a>
            <a href="{% url 'login' %}" class="btn btn-lg btn-outline-light">Log In</a>
        {% endif %}
      </div>

    </div>
</div>


<!-- FEATURES -->
<section class="container py-5 fade-up">
    <div class="row g-4">

        <div class="col-md-6 col-lg-3">
            <div class="feature-card text-center">
                <div class="feature-icon" style="background: linear-gradient(135deg,#10b981,#3b82f6);">üîç</div>
                <h5>Accurate Scoring</h5>
                <p class="text-muted">Score based on accuracy, speed, and category difficulty.</p>
            </div>
        </div>

        <div class="col-md-6 col-lg-3">
            <div class="feature-card text-center">
                <div class="feature-icon" style="background: linear-gradient(135deg,#f97316,#ffb86b);">üìä</div>
                <h5>Visual Reports</h5>
                <p class="text-muted">Graphs, category IQ breakdown & improvement tracking.</p>
            </div>
        </div>

        <div class="col-md-6 col-lg-3">
            <div class="feature-card text-center">
                <div class="feature-icon" style="background: linear-gradient(135deg,#7c3aed,#06b6d4);">‚è±Ô∏è</div>
                <h5>Real Test Conditions</h5>
                <p class="text-muted">Timed tests, automatic submission & fairness enforced.</p>
            </div>
        </div>

        <div class="col-md-6 col-lg-3">
            <a href="{% url 'practice_home' %}" class="text-decoration-none" style="color: inherit;">
                <div class="feature-card text-center">
                <div class="feature-icon" style="background: linear-gradient(135deg,#ef4444,#fb7185);">üéØ</div>
                <h5>Practice Mode</h5>
                <p class="text-muted">Play Sudoku & brain training games.</p>
                </div>
            </a>

        </div>

    </div>
</section>


<!-- SAMPLE QUESTIONS CAROUSEL -->
<section class="container py-5 fade-up">
    <h3 class="mb-3">Sample Questions</h3>

    <div id="sampleCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">

            {% for img, title, desc in sample_questions %}

            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <div class="row g-4 align-items-center">

                    <div class="col-md-6">
                        <div class="sample-card">
                            <img src="/media/images/{{ img }}" class="sample-img w-100" />
                        </div>
                    </div>

                    <div class="col-md-6">
                        <h4>{{ title }}</h4>
                        <p class="text-muted">{{ desc }}</p>
                    </div>

                </div>
            </div>
            {% endfor %}

        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#sampleCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>

        <button class="carousel-control-next" type="button" data-bs-target="#sampleCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>

    </div>
</section>


<!-- HOW IT WORKS -->
<section class="container py-5 fade-up">
    <h3 class="mb-4">How It Works</h3>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="step text-center">
                <div style="font-size:35px;">üìù</div>
                <h5>Create Account</h5>
                <p class="text-muted">Sign up securely and unlock full features.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="step text-center">
                <div style="font-size:35px;">‚è±Ô∏è</div>
                <h5>Take the Test</h5>
                <p class="text-muted">Answer 25 curated questions with a timer.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="step text-center">
                <div style="font-size:35px;">üìà</div>
                <h5>Get Your IQ</h5>
                <p class="text-muted">See your IQ with category details & charts.</p>
            </div>
        </div>
    </div>
</section>


<!-- CALL TO ACTION -->
<section class="container py-5 fade-up text-center">
    <div class="p-4 rounded-4" style="background: rgba(0,0,0,0.07);">
        <h4 class="mb-3">Ready to discover your true IQ?</h4>

        {% if request.user.is_authenticated %}
            <a href="{% url 'test_list' %}" class="btn btn-primary btn-lg">Start Testing</a>
        {% else %}
            <a href="{% url 'register' %}" class="btn btn-primary btn-lg">Create Account</a>
            <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg ms-2">Login</a>
        {% endif %}
    </div>
</section>

{% endblock %}


{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", () => {
    const revealEls = document.querySelectorAll(".fade-up");

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add("show");
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.2 });

    revealEls.forEach(el => observer.observe(el));
});
</script>
{% endblock %}
